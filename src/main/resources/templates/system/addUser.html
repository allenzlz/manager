<!DOCTYPE html>
<html lang="en" class="no-js" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>添加用户</title>
    <link rel="stylesheet" href="/static/js/public/layui/css/layui.css">
</head>
<body>

<form class="layui-form" lay-filter="menuIframe" id="menuIframe">
    <div style="padding:20px 100px">
        <div class="layui-form-item">
            <label class="layui-form-label">用户姓名</label>
            <div class="layui-input-block">
                <input type="text" name="realName" lay-verify="required" autocomplete="off" placeholder="请输入用户姓名" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">用户登录账号</label>
            <div class="layui-input-block">
                <input type="text" name="loginName" lay-verify="required" autocomplete="off" placeholder="请输入用户姓名" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">用户登录密码</label>
            <div class="layui-input-block">
                <input type="password" name="password" lay-verify="required" autocomplete="new-password" placeholder="请输入用户登录密码" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">确认用户登录密码</label>
            <div class="layui-input-block">
                <input type="password" name="repassword" lay-verify="required" autocomplete="off" placeholder="请输入用户登录密码" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">用户性别</label>
            <div class="layui-input-block">
                <select name="sex" lay-verify="required" lay-filter="aihao">
                    <option value="" selected>选择性别</option>
                    <option value="0">女</option>
                    <option value="1">男</option>
                </select>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">用户头像</label>
            <div class="layui-input-block">
                <input type="text" name="portrait" lay-verify="required" autocomplete="off" placeholder="用户头像" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">用户电话</label>
            <div class="layui-input-block">
                <input type="text" name="phoneNumber" lay-verify="phone" autocomplete="off" placeholder="用户电话" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">用户邮箱</label>
            <div class="layui-input-block">
                <input type="text" name="email" lay-verify="email" autocomplete="off" placeholder="用户邮箱" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">用户生日</label>
            <div class="layui-input-block">
                <input type="date" name="birthday" autocomplete="off" placeholder="用户邮箱" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">用户部门</label>
            <div class="layui-input-block">
                <select name="departmentId" lay-verify="required" lay-filter="aihao">
                    <option value="" selected>选择部门</option>
                    <option value="0">开发部</option>
                    <option value="1">运维部</option>
                    <option value="2">知识部</option>
                </select>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">用户职位</label>
            <div class="layui-input-block">
                <select name="positionId" lay-verify="required" lay-filter="aihao">
                    <option value="" selected>选择职位</option>
                    <option value="0">普通</option>
                    <option value="1">中级</option>
                    <option value="2">高级</option>
                </select>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">城市</label>
            <div class="layui-input-block">
                <input type="text" name="city" autocomplete="off" placeholder="请输入城市" class="layui-input">
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">用户状态</label>
            <div class="layui-input-block">
                <select name="state" lay-verify="required" lay-filter="aihao">
                    <option value="" selected>选择状态</option>
                    <option value="1">正常</option>
                    <option value="2">禁用</option>
                    <option value="3">删除</option>
                    <option value="4">过期</option>
                </select>
            </div>
        </div>

        <div class="layui-form-item">
            <div style="text-align: center;padding-right: 110px;" class="layui-input-block">
                <button type="submit" class="layui-btn" lay-submit="" lay-filter="addUser">保存</button>
                <button type="reset" class="layui-btn layui-btn-primary">重置</button>
            </div>
        </div>
    </div>


</form>
<script src="/static/js/public/layui/layui.all.js"></script>
<script>
    var allen = 1;
    layui.config({
        base: '/'
    }).use(['layer', 'form'], function () {
        var $ = layui.jquery;
        var layer = layui.layer;
        var form = layui.form;
        var router = layui.router();

        form.on('submit(addUser)', function (data) {
            var articleFrom = data.field;
            $.ajax({
                url: '/system/addSysUser',
                method: 'post',
                contentType: 'application/json',
                data: JSON.stringify(articleFrom),
                dataType: 'json',
                success: function (res) {
                    window.parent.location.reload();
                },
                error: function (res) {
                    alert('添加失败');
                },
                end: function () {
                    alert(123);
                }
            });
            var index = parent.layer.getFrameIndex(window.name);//先得到当前iframe层的索引
            parent.layer.close(index); //再执行关闭
            return false;
        });

    });
</script>
</body>
</html>